<launch>
<arg name="robot" />

<!-- pass calibration files if needed -->
<arg name="rgb_camera_info_url"   default="" />
<arg name="depth_camera_info_url" default="" />
<arg name="depth_registration" default="true" />
<arg name="publish_tf" default="true" />

<!-- * to record:
  - for a compressed version:
  roslaunch vision kinect_node.launch robot:=kinect_only
  rosbag record -l 1 /tf /kinect_only_camera/rgb/image_color/compressed /kinect_only_camera/depth_registered/image_rect/compressed_rounded

  - for an uncompressed version:
  roslaunch main_control kinect_only_configuration.launch
  rosbag record -l 1 /tf /kinect_only/rgb /kinect_only/depth

  * to play:
  roscore
  rosbag play -i -l bags/maggie_one_frame_rgb_depth.bag
  roslaunch vision kinect_viewer.launch robot:=kinect_only
-->

<!-- COMPRESS_PNG = 1, COMPRESS_JPG = 2, COMPRESS_TIFF = 3 -->
<param name="compressed_rounded_method" value="1" />


<!-- ******************* the new openni_launch node
documentation: http://mirror.umd.edu/roswiki/openni_camera.html
-->
<!-- Depth data registration -->
<!--
<param name="/$(arg robot)_camera/driver/depth_registration" value="$(arg depth_registration)" />
-->

<!-- Skip N images for every image published (rgb/depth/depth_registered/ir) Range: 0 to 10 -->
<param name="/$(arg robot)_camera/driver/data_skip" value="4" />

<!-- Image output mode for the color/grayscale image Possible values are:
SXGA_15Hz (1): 1280x1024@15Hz, VGA_30Hz (2): 640x480@30Hz,   VGA_25Hz (3): 640x480@25Hz,
QVGA_25Hz (4): 320x240@25Hz,   QVGA_30Hz (5): 320x240@30Hz,  QVGA_60Hz (6): 320x240@60Hz,
QQVGA_25Hz (7): 160x120@25Hz,  QQVGA_30Hz (8): 160x120@30Hz, QQVGA_60Hz (9): 160x120@60Hz
Kinect supports natively just SXGA@15Hz, which actually streams ~10Hz, and VGA@30Hz.
All other modes at 30Hz are down sampled in the driver
and modes at 25Hz are not supported by the Kinect.
-->
 <param name="/$(arg robot)_camera/driver/image_mode" value="2" />

<!-- depth output mode Possible values are:
SXGA_15Hz (1): 1280x1024@15Hz, VGA_30Hz (2): 640x480@30Hz,   VGA_25Hz (3): 640x480@25Hz,
QVGA_25Hz (4): 320x240@25Hz,   QVGA_30Hz (5): 320x240@30Hz,  QVGA_60Hz (6): 320x240@60Hz,
QQVGA_25Hz (7): 160x120@25Hz,  QQVGA_30Hz (8): 160x120@30Hz, QQVGA_60Hz (9): 160x120@60Hz -->
<!-- <param name="/$(arg robot)_camera/driver/depth_mode" value="5" />-->

<include file="$(find openni_launch)/launch/openni.launch">
  <arg name="camera" value="$(arg robot)_camera" />
  <arg name="rgb_camera_info_url" value="$(arg rgb_camera_info_url)" />
  <arg name="depth_camera_info_url" value="$(arg depth_camera_info_url)" />
  <arg name="publish_tf" value="$(arg publish_tf)" />
  <arg name="depth_registration" value="$(arg depth_registration)" />
</include>

<!-- keep only 6 clouds per second -->
<!-- node pkg="topic_tools" type="drop" name="kinect_drop_pts"
      args="camera/depth/points 4 5 camera/depth/points_drop"/ -->

<!-- publish kinect serial -->
<group ns="$(arg robot)">
  <node pkg="kinect" type="publish_kinect_serial.exe"
        name="publish_kinect_serial"  output="screen"/>
</group>
</launch>
